# Antigravity — Environment Configuration
# Copy this file to .env and fill in your values.
# Never commit .env to version control.

# Address the Axum server listens on.
BIND_ADDR=0.0.0.0:3000

# Base URL of the MetaTrader 5 HTTP adapter (your EA endpoint).
MT5_BASE_URL=http://localhost:8081

# Structured log filter. Options: error | warn | info | debug | trace
RUST_LOG=antigravity=debug,tower_http=info

# ── Confirmation Engine ──────────────────────────────────────────────────────
# Spread สูงสุดที่ยอมรับได้ (price units เดียวกับ symbol)
# BTCUSD: 50.0 ($50) | EURUSD: 0.0003 (3 pips) | Gold: 0.5
CONFIRM_MAX_SPREAD=50.0

# ต้องเห็น Zone Probe ก่อนเข้า? (true = แนะนำ, false = เข้าทันที)
CONFIRM_REQUIRE_PROBE=true

# ราคาต้องอยู่ใน Zone ต่อเนื่องกี่ Ticks ขั้นต่ำ (1 = ไม่รอ, 2-5 = แนะนำ)
CONFIRM_MIN_ZONE_TICKS=2

# ดู Tick ย้อนหลังกี่อันเพื่อหา Zone Probe (ขึ้นอยู่กับความเร็ว Tick)
CONFIRM_PROBE_LOOKBACK=15

# ── Risk Management ─────────────────────────────────────────────────────
# Trade เลยได้สูงสุดกี่ครั้งต่อวัน (0 = ไม่จำกัด)
RISK_MAX_TRADES_PER_DAY=10

# Fail ติดข้อกันอีกเท่าไหร่ถึงหยุดอัตโนมัติ (0 = ไม่ Auto-Kill)
RISK_MAX_CONSECUTIVE_FAILS=3

# พักหลัง Fail กี่วินาที (default = 5 นาที)
RISK_COOLDOWN_SECS=300

# ── Database (PostgreSQL) ──────────────────────────────────────────────
# ตั้งค่าเนื่อง แล้ว cargo run --features postgres
# DATABASE_URL=postgres://user:password@localhost:5432/antigravity

# ── API Key Authentication ─────────────────────────────────────────────
# ว่าง = Dev Mode (ไม่ต้อง Auth) | ตั้งค่า = Production (ต้องส่ง X-API-Key header)
# API_KEY=change_this_in_production

# ── RSI / MA Confirmation ─────────────────────────────────────────────
# BUY ห้ามเข้าเมื่อ RSI ≥ overbought | SELL ห้ามเข้าเมื่อ RSI ≤ oversold
# ถ้า MT5 ไม่ส่ง rsi_14 ใน TickData → ข้าม check นี้ได้
CONFIRM_RSI_OVERBOUGHT=70.0
CONFIRM_RSI_OVERSOLD=30.0
